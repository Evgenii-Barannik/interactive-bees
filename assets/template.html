<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <link href="assets/styles.css" rel="stylesheet">
</head>
<body class="main-container">
    <h3 class="title" style="text-align: center;">
        Beehive sensor data
    </h3>
    <div id="update_mode_control" style="margin: 10px 0;">
        <label style="display: flex; align-items: center; gap: 8px; font-family: 'Open Sans', Verdana, Arial, sans-serif;">
            <input type="checkbox" id="continuous_update" name="continuous_update">
            <span>Enable continuous acoustic spectra updates</span>
        </label>
    </div>
    <div id="time_slider_plot" class="plotly-container">
	{{time_slider_plot}}
    </div>
    <div id="acoustic_spectra_plot" class="plotly-container">
	{{acoustic_spectra_plot}}
    </div>

	<!--   <div class="plotly-container">-->
	<!--{{temperature_humidity_plot}}-->
	<!--   </div>-->

    <div>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-left: 60px">
            <div class="title">Gaussian fit</div>
            <select id="gaussImageSelector" style="width: 100px; margin-right: 20px;">
                {% for sensor in sensors %}
                <option value="{{OUTPUT_DIR}}/gaussians-sensor-{{sensor}}.png">Sensor {{sensor}}</option>
                {% endfor %}
            </select>
        </div>
        <img id="displayedGaussImage" class="image-container" src="{{OUTPUT_DIR}}/gaussians-sensor-{{sensors[0]}}.png" alt="Gaussian decomposition">
    </div>

    <div>
        <div style="display: flex; justify-content: space-between; align-items: center; margin-left: 60px">
            <div class="title">Acoustic similarity</div>
            <select id="imageSelector" style="width: 100px; margin-right: 20px;">
                {% for sensor in sensors %}
                <option value="{{OUTPUT_DIR}}/similarity-measures-sensor-{{sensor}}.png">Sensor {{sensor}}</option>
                {% endfor %}
            </select>
        </div>
        <img id="displayedImage" class="image-container" src="{{OUTPUT_DIR}}/similarity-measures-sensor-{{sensors[0]}}.png" alt="Similarity measures">
    </div>

    <div class="plotly-container">
        {{parallel_selector_plot}}
    </div>

    <details>
	<summary>About acoustic spectra</summary>
	<pre style="white-space: pre-wrap">{{acoustic_spectra_info}}</pre>
    </details>
	<!--   <details>-->
	<!--<summary>About temperature-humidity diagram</summary>-->
	<!--<pre style="white-space: pre-wrap">{{temperature_humidity_info}}</pre>-->
	<!--   </details>-->
    <!--<details>-->
    <!--    <summary>About Gaussian decomposition</summary>-->
    <!--    <pre style="white-space: pre-wrap">{{gauss_info}}</pre>-->
    <!--</details>-->
    <details>
        <summary>About acoustic similarity</summary>
        <pre style="white-space: pre-wrap">{{similarity_info}}</pre>
    </details>
    <details>
        <summary>About datapoints used</summary>
        <pre style="white-space: pre-wrap">{{datapoints_info}}</pre>
    </details>
    <script>
        const gaussImageSelector = document.getElementById('gaussImageSelector');
        const displayedGaussImage = document.getElementById('displayedGaussImage');
        gaussImageSelector.addEventListener('change', function() {
            displayedGaussImage.src = this.value;
        });

        const imageSelector = document.getElementById('imageSelector');
        const displayedImage = document.getElementById('displayedImage');
        imageSelector.addEventListener('change', function() {
            displayedImage.src = this.value;
        });
    </script>
    <script src="{{OUTPUT_DIR}}/spectra_callback.js?v={{version}}"></script>
</body>
</html>
